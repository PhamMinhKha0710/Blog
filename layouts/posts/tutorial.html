{{- define "title" }}{{ .Title }} - {{ .Site.Title }}{{ end -}}

{{- define "content" -}}
    {{- $params := .Scratch.Get "params" -}}
    
    <article class="post-single tutorial-post">
        <header class="post-header">
            {{- /* Title */ -}}
            <h1 class="post-title">
                {{ .Title }}
            </h1>

            <div class="post-info">
                <div class="tutorial-difficulty">
                    {{- with .Params.difficulty -}}
                        {{- $level := . -}}
                        <span class="difficulty-label">Độ khó:</span>
                        <span class="difficulty-level difficulty-{{ $level | urlize }}">
                            {{- if eq $level "Beginner" -}}
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                                <i class="far fa-star"></i>
                                <span>Cơ bản</span>
                            {{- else if eq $level "Intermediate" -}}
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                                <span>Trung bình</span>
                            {{- else if eq $level "Advanced" -}}
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <span>Nâng cao</span>
                            {{- else -}}
                                <span>{{ $level }}</span>
                            {{- end -}}
                        </span>
                    {{- end -}}
                </div>
                
                <div class="tutorial-time">
                    {{- with .Params.tutorialTime -}}
                        <span class="time-label">Thời gian hoàn thành:</span>
                        <span class="time-value">{{ . }}</span>
                    {{- else -}}
                        <span class="time-label">Thời gian đọc:</span>
                        <span class="time-value">{{ .ReadingTime }} phút</span>
                    {{- end -}}
                </div>
            </div>

            {{- /* Meta */ -}}
            <div class="post-meta">
                {{- /* Date */ -}}
                <time class="post-date" datetime="{{ .Date.Format "2006-01-02T15:04:05-07:00" }}">
                    {{- printf `<i class="far fa-calendar-alt fa-fw"></i> %s` (.Date.Format ($.Site.Params.dateFormat | default "2006-01-02")) | safeHTML -}}
                </time>
                
                {{- /* Categories */ -}}
                {{- with .Params.categories -}}
                <span class="post-categories">
                    <i class="far fa-folder fa-fw"></i>
                    {{- range $index, $value := . -}}
                        {{- if gt $index 0 }}, {{ end -}}
                        <a href="{{ print "/categories/" (urlize $value) | relLangURL }}">{{ $value }}</a>
                    {{- end -}}
                </span>
                {{- end -}}

                {{- /* Author */ -}}
                {{- with .Params.author -}}
                <span class="post-author">
                    <i class="fas fa-user fa-fw"></i>
                    {{- . -}}
                </span>
                {{- end -}}
            </div>

            {{- /* Requirements section */ -}}
            {{- with .Params.requirements -}}
            <div class="tutorial-requirements">
                <h3><i class="fas fa-list-check"></i> Yêu cầu</h3>
                <ul>
                    {{- range . -}}
                    <li>{{ . }}</li>
                    {{- end -}}
                </ul>
            </div>
            {{- end -}}
        </header>

        {{- /* Featured Image */ -}}
        {{- $image := .Resources.GetMatch "featured-image" -}}
        {{- with .Params.featuredImage -}}
            {{- $image = . | relURL -}}
        {{- end -}}
        {{- with $image -}}
        <div class="post-featured-image">
            <img loading="lazy" src="{{ . }}" alt="Featured Image">
        </div>
        {{- end -}}

        {{- /* Tutorial Overview */ -}}
        <div class="tutorial-overview">
            <div class="overview-header">
                <h2><i class="fas fa-info-circle"></i> Tổng quan</h2>
            </div>
            <div class="overview-content">
                {{- with .Description -}}
                    <p class="overview-description">{{ . }}</p>
                {{- end -}}
                
                {{- if .Params.toc | default $params.toc | default $.Site.Params.page.toc | default true -}}
                    <div class="overview-steps">
                        <h3>Các bước thực hiện:</h3>
                        {{ .TableOfContents }}
                    </div>
                {{- end -}}
            </div>
        </div>

        {{- /* Content */ -}}
        <div class="post-content">
            {{- /* Display content */ -}}
            {{ .Content }}
        </div>
        
        {{- /* Tutorial completion */ -}}
        <div class="tutorial-completion">
            <div class="completion-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="completion-message">
                <h3>Chúc mừng!</h3>
                <p>Bạn vừa hoàn thành bài hướng dẫn {{ .Title }}.</p>
                
                {{- with .Params.nextSteps -}}
                <div class="next-steps">
                    <h4>Các bước tiếp theo:</h4>
                    <ul>
                        {{- range . -}}
                        <li>{{ . }}</li>
                        {{- end -}}
                    </ul>
                </div>
                {{- end -}}
            </div>
        </div>

        {{- /* Footer */ -}}
        <footer class="post-footer">
            {{- /* Tags */ -}}
            {{- with .Params.tags -}}
            <div class="post-tags">
                <i class="fas fa-tags fa-fw"></i>
                {{- range $index, $value := . -}}
                    {{- if gt $index 0 }}, {{ end -}}
                    <a href="{{ print "/tags/" (urlize $value) | relLangURL }}">{{ $value }}</a>
                {{- end -}}
            </div>
            {{- end -}}

            {{- /* Navigation between posts */ -}}
            {{- partial "single/post-navigation.html" . -}}
            
            {{- /* Share buttons */ -}}
            {{- partial "single/share.html" . -}}
        </footer>

        {{- /* Comment */ -}}
        {{- partial "comment.html" . -}}
    </article>
{{- end -}}





